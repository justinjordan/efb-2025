{"mappings":"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","sources":["src/main.ts","src/states/GameState.ts","src/entities/Ball.ts","src/entities/Layer.ts","src/types/State.ts","src/states/PauseState.ts","src/states/LoaderState.ts"],"sourcesContent":["import log from \"loglevel\";\nimport State from \"./types/State\";\nimport GameState from \"./states/GameState\";\nimport LoaderState from \"./states/LoaderState\";\n\nconst defaultOptions = {\n  debug: false,\n  loader: false,\n};\n\ntype GameOptions = Partial<typeof defaultOptions>;\n\nexport default class Efb {\n  logger = log.getLogger(\"Efb\");\n  options: GameOptions;\n  states: State[] = [];\n  running = false;\n\n  private lastUpdate = 0;\n\n  constructor(\n    public canvas: HTMLCanvasElement,\n    options: GameOptions = defaultOptions\n  ) {\n    this.options = { ...defaultOptions, ...options };\n\n    this.handleResize();\n    const resizeObserver = new ResizeObserver(() => this.handleResize());\n    resizeObserver.observe(this.canvas);\n\n    this.logger.setLevel(options.debug ? \"debug\" : \"silent\");\n    this.logger.debug(\"Efb initialized with options\", this.options);\n  }\n\n  public start() {\n    this.running = true;\n    this.logger.debug(\"Efb is running\");\n\n    // Add the first state\n    const state = this.options.loader\n      ? new LoaderState(this)\n      : new GameState(this);\n    this.states.push(state);\n    state.handleEnter();\n\n    // Start the game loop\n    requestAnimationFrame(this.loop.bind(this));\n  }\n\n  public stop() {\n    this.running = false;\n    this.states = [];\n    this.logger.debug(\"Efb is stopped\");\n  }\n\n  public getCurrentState() {\n    return this.states?.[this.states.length - 1];\n  }\n\n  public getPreviousState() {\n    return this.states?.[this.states.length - 2];\n  }\n\n  public pushState(state: State) {\n    const lastState = this.getCurrentState();\n\n    if (lastState) {\n      // Exit the last state before entering the new one\n      lastState.handleExit();\n    }\n\n    state.handleEnter();\n    this.states.push(state);\n  }\n\n  public popState() {\n    const lastState = this.states.pop();\n\n    if (lastState) {\n      // Exit the last state before entering the new one\n      lastState.handleExit();\n    }\n\n    const newState = this.getCurrentState();\n    newState.handleEnter();\n  }\n\n  private handleResize() {\n    this.canvas.width = this.canvas.clientWidth;\n    this.canvas.height = this.canvas.clientHeight;\n\n    this.logger.debug(\"Canvas resized to\", {\n      width: this.canvas.width,\n      height: this.canvas.height,\n    });\n\n    try {\n      this.states.forEach((state) => {\n        state?.handleResize();\n      });\n    } catch (error) {\n      this.logger.error(\"Error resizing current state\", error);\n    }\n  }\n\n  private loop(currentTime: number) {\n    let delta =\n      this.lastUpdate > 0 ? (currentTime - this.lastUpdate) / 1000 : 0;\n    this.lastUpdate = currentTime;\n\n    // Cancel the loop if the delta is too large (e.g. when tab is inactive)\n    if (delta > 1) {\n      delta = 0;\n    }\n\n    if (!this.running) {\n      this.logger.debug(\"Efb is not running, stopping loop\");\n      this.stop();\n      return;\n    }\n\n    if (this.states.length === 0) {\n      this.logger.warn(\"No states to run, stopping loop\");\n      this.stop();\n      return;\n    }\n\n    try {\n      const state = this.getCurrentState();\n      const ctx = this.canvas.getContext(\"2d\");\n\n      if (!ctx) {\n        throw new Error(\"Cannot get 2d context from canvas\");\n      }\n\n      // Update all states\n      state.update(delta);\n\n      // Render the current state\n      state.render(ctx);\n    } catch (error) {\n      this.logger.error(\"Error in game loop\", error);\n    }\n\n    // Call the loop again\n    requestAnimationFrame(this.loop.bind(this));\n  }\n}\n","import Ball from \"../entities/Ball\";\nimport Layer from \"../entities/Layer\";\nimport Efb from \"../main\";\nimport State from \"../types/State\";\nimport PauseState from \"./PauseState\";\n\nexport default class GameState extends State {\n  balls: Ball[] = [];\n  ballLayer: Layer;\n  trailLayer: Layer;\n  backgroundLayer: Layer;\n\n  private heldBall: Ball | null = null;\n  private mouseDown = false;\n  private mouseX = 0;\n  private mouseY = 0;\n\n  constructor(public game: Efb) {\n    super(game);\n\n    this.ballLayer = new Layer(this.canvas);\n    this.trailLayer = new Layer(this.canvas);\n    this.backgroundLayer = new Layer(this.canvas, { backgroundColor: \"#023\" });\n\n    this.balls.push(\n      new Ball({\n        x: this.canvas.width / 2,\n        y: this.canvas.height / 2 - 100,\n        xSpeed: 500,\n        ySpeed: 0,\n      })\n    );\n    this.balls.push(\n      new Ball({\n        x: this.canvas.width / 2,\n        y: this.canvas.height / 2 + 100,\n        xSpeed: -500,\n        ySpeed: 0,\n      })\n    );\n\n    this.handleKeyup = this.handleKeyup.bind(this);\n  }\n\n  onKeyup(e: KeyboardEvent) {\n    if (e.key === \"p\") {\n      this.game.pushState(new PauseState(this.game));\n    }\n\n    if (e.key === \"+\" || e.key === \"=\") {\n      this.balls.push(\n        new Ball({\n          x: this.canvas.width * Math.random(),\n          y: this.canvas.height * Math.random(),\n          xSpeed: Math.random() * 1000 - 500,\n          ySpeed: Math.random() * 1000 - 500,\n        })\n      );\n    }\n\n    if (e.key === \"-\" || e.key === \"_\") {\n      this.balls.pop();\n    }\n  }\n\n  onMouseDown(e: MouseEvent) {\n    this.mouseDown = true;\n  }\n\n  onMouseUp(e: MouseEvent) {\n    this.mouseDown = false;\n    this.heldBall = null;\n  }\n\n  onMouseMove(e: MouseEvent) {\n    const rect = this.game.canvas.getBoundingClientRect();\n    this.mouseX = e.clientX - rect.left;\n    this.mouseY = e.clientY - rect.top;\n  }\n\n  onResize() {\n    this.ballLayer.handleResize();\n    this.trailLayer.handleResize();\n    this.backgroundLayer.handleResize();\n  }\n\n  update(delta: number) {\n    this.balls.forEach((ball) => ball.update(delta));\n\n    // Handle ball attraction\n    for (let i = 0; i < this.balls.length; i++) {\n      for (let j = 0; j < this.balls.length; j++) {\n        if (i === j) continue;\n\n        const ball1 = this.balls[i];\n        const ball2 = this.balls[j];\n\n        if (ball1 === this.heldBall) continue;\n\n        const dx = ball1.x - ball2.x;\n        const dy = ball1.y - ball2.y;\n        const dist = Math.sqrt(dx * dx + dy * dy);\n        const dir = Math.atan2(dy, dx);\n\n        ball1.xSpeed -= 8 * dist * Math.cos(dir) * delta;\n        ball1.ySpeed -= 8 * dist * Math.sin(dir) * delta;\n      }\n    }\n\n    // Handle ball boundaries\n    this.balls.forEach((ball) => {\n      if (ball === this.heldBall) return;\n\n      if (ball.x < ball.radius) {\n        ball.x = ball.radius;\n        ball.xSpeed = Math.abs(ball.xSpeed);\n      }\n\n      if (ball.x > this.canvas.width - ball.radius) {\n        ball.x = this.canvas.width - ball.radius;\n        ball.xSpeed = -Math.abs(ball.xSpeed);\n      }\n\n      if (ball.y < ball.radius) {\n        ball.y = ball.radius;\n        ball.ySpeed = Math.abs(ball.ySpeed);\n      }\n\n      if (ball.y > this.canvas.height - ball.radius) {\n        ball.y = this.canvas.height - ball.radius;\n        ball.ySpeed = -Math.abs(ball.ySpeed);\n      }\n\n      if (\n        !this.heldBall &&\n        this.mouseDown &&\n        ball.isCollision(this.mouseX, this.mouseY)\n      ) {\n        this.heldBall = ball;\n      }\n    });\n\n    // handle mouse drag\n    if (this.heldBall) {\n      this.heldBall.x = this.mouseX;\n      this.heldBall.y = this.mouseY;\n      this.heldBall.xSpeed = 0;\n      this.heldBall.ySpeed = 0;\n    }\n\n    this.ballLayer.withLayer((canvas, ctx) => {\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\n      this.balls.forEach((ball) => ball.draw(canvas));\n    });\n\n    this.trailLayer.withLayer((canvas, ctx) => {\n      this.balls.forEach((ball) => {\n        ctx.beginPath();\n        ctx.moveTo(ball.x, ball.y);\n        ctx.lineWidth = ball.radius * 2;\n        ctx.strokeStyle = ball.color;\n        ball.pastPositions.forEach(({ x, y }) => {\n          ctx.lineTo(x, y);\n        });\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.fillStyle = ball.color;\n        ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);\n        ctx.fill();\n      });\n    });\n\n    this.trailLayer = new Layer(this.canvas, this.trailLayer).withLayer(\n      (canvas, ctx) => {\n        ctx.filter = \"blur(2px) hue-rotate(5deg) saturate(0.99) opacity(0.99)\";\n        ctx.drawImage(this.trailLayer.canvas, 0, 0);\n        ctx.filter = \"none\";\n      }\n    );\n\n    this.backgroundLayer.clear();\n    this.ctx.drawImage(this.backgroundLayer.canvas, 0, 0);\n    this.ctx.drawImage(this.trailLayer.canvas, 0, 0);\n    this.ctx.drawImage(this.ballLayer.canvas, 0, 0);\n  }\n\n  render(ctx: CanvasRenderingContext2D): void {\n    ctx.drawImage(this.canvas, 0, 0);\n  }\n}\n","import Efb from \"../main\";\nimport State from \"../types/State\";\n\nexport default class Ball {\n  x: number = 0;\n  y: number = 0;\n  pastPositions: { x: number; y: number }[] = [];\n  xSpeed: number = 0;\n  ySpeed: number = 0;\n  radius: number = 20;\n  color: string = \"#00f\";\n\n  constructor(options?: Partial<Ball>) {\n    Object.assign(this, options);\n  }\n\n  update(delta: number): void {\n    this.pastPositions.push({ x: this.x, y: this.y });\n    if (this.pastPositions.length > 1) {\n      this.pastPositions.shift();\n    }\n\n    this.x += this.xSpeed * delta;\n    this.y += this.ySpeed * delta;\n  }\n\n  draw(canvas: HTMLCanvasElement): void {\n    const ctx = canvas.getContext(\"2d\");\n\n    if (!ctx) {\n      throw new Error(\"Cannot get 2d context from canvas\");\n    }\n\n    ctx.beginPath();\n    ctx.fillStyle = this.color;\n    ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n    ctx.fill();\n  }\n\n  isCollision(x: number, y: number): boolean {\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n\n    return distance < this.radius;\n  }\n}\n","export default class Layer {\n  public canvas: HTMLCanvasElement;\n  public ctx: CanvasRenderingContext2D;\n  backgroundColor?: string;\n\n  constructor(\n    private readonly parentCanvas: HTMLCanvasElement,\n    options?: Partial<Layer>\n  ) {\n    Object.assign(this, options);\n\n    this.canvas = document.createElement(\"canvas\");\n    const ctx = this.canvas.getContext(\"2d\");\n    if (!ctx) {\n      throw new Error(\"Cannot get 2d context from canvas\");\n    }\n    this.ctx = ctx;\n\n    this.handleResize();\n    this.clear();\n  }\n\n  public handleResize() {\n    this.canvas.width = this.parentCanvas.width;\n    this.canvas.height = this.parentCanvas.height;\n  }\n\n  public clear() {\n    if (!this.backgroundColor || !this.ctx) {\n      return;\n    }\n\n    this.ctx.fillStyle = this.backgroundColor;\n    this.ctx.fillRect(0, 0, this.parentCanvas.width, this.parentCanvas.height);\n  }\n\n  withLayer(\n    cb: (canvas: HTMLCanvasElement, ctx: CanvasRenderingContext2D) => void\n  ) {\n    if (!this.ctx) {\n      throw new Error(\"Cannot get 2d context from canvas\");\n    }\n\n    cb(this.canvas, this.ctx);\n\n    return this;\n  }\n}\n","import Efb from \"../main\";\n\nexport default abstract class State {\n  public canvas!: HTMLCanvasElement;\n  public ctx!: CanvasRenderingContext2D;\n  public isActive = false;\n\n  constructor(public game: Efb) {\n    this.canvas = document.createElement(\"canvas\");\n    this.canvas.width = this.game.canvas.width;\n    this.canvas.height = this.game.canvas.height;\n    const ctx = this.canvas.getContext(\"2d\");\n    if (!ctx) {\n      throw new Error(\"Cannot get 2d context from canvas\");\n    }\n    this.ctx = ctx;\n\n    this.handleEnter = this.handleEnter.bind(this);\n    this.handleExit = this.handleExit.bind(this);\n    this.handleKeyup = this.handleKeyup.bind(this);\n    this.handleMouseDown = this.handleMouseDown.bind(this);\n    this.handleMouseUp = this.handleMouseUp.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.handleResize = this.handleResize.bind(this);\n  }\n\n  onEnter() {}\n  onExit() {}\n  onKeyup(e: KeyboardEvent) {}\n  onMouseDown(e: MouseEvent) {}\n  onMouseUp(e: MouseEvent) {}\n  onMouseMove(e: MouseEvent, mouseX: number, mouseY: number) {}\n  onResize() {}\n  beforeRender() {}\n\n  abstract update(delta: number): void;\n  abstract render(ctx: CanvasRenderingContext2D): void;\n\n  handleEnter() {\n    this.isActive = true;\n\n    document.addEventListener(\"keyup\", this.handleKeyup);\n    document.addEventListener(\"mousedown\", this.handleMouseDown);\n    document.addEventListener(\"mouseup\", this.handleMouseUp);\n    document.addEventListener(\"mousemove\", this.handleMouseMove);\n\n    this.onEnter();\n  }\n\n  handleExit() {\n    this.isActive = false;\n\n    document.removeEventListener(\"keyup\", this.handleKeyup);\n    document.removeEventListener(\"mousedown\", this.handleMouseDown);\n    document.removeEventListener(\"mouseup\", this.handleMouseUp);\n    document.removeEventListener(\"mousemove\", this.handleMouseMove);\n\n    this.onExit();\n  }\n\n  handleKeyup(e: KeyboardEvent) {\n    this.onKeyup(e);\n  }\n\n  handleResize() {\n    this.canvas.width = this.game.canvas.width;\n    this.canvas.height = this.game.canvas.height;\n    this.onResize();\n  }\n\n  handleMouseDown(e: MouseEvent) {\n    this.onMouseDown(e);\n  }\n\n  handleMouseUp(e: MouseEvent) {\n    this.onMouseUp(e);\n  }\n\n  handleMouseMove(e: MouseEvent) {\n    const rect = this.game.canvas.getBoundingClientRect();\n    const mouseX = e.clientX - rect.left;\n    const mouseY = e.clientY - rect.top;\n    this.onMouseMove(e, mouseX, mouseY);\n  }\n}\n","import Efb from \"../main\";\nimport State from \"../types/State\";\n\nexport default class PauseState extends State {\n  constructor(public game: Efb) {\n    super(game);\n\n    this.handleKeyup = this.handleKeyup.bind(this);\n  }\n\n  onKeyup(e: KeyboardEvent) {\n    if (e.key === \"p\") {\n      this.game.popState();\n    }\n  }\n\n  onEnter() {\n    const width = 300;\n    const height = 200;\n\n    // Clear the canvas\n    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    // Draw the pause overlay\n    this.ctx.fillStyle = \"rgba(0, 0, 0, 0.5)\";\n    this.ctx.shadowColor = \"rgba(0, 0, 0, 0.7)\";\n    this.ctx.shadowOffsetX = 5;\n    this.ctx.shadowOffsetY = 5;\n    this.ctx.shadowBlur = 30;\n    this.ctx.roundRect(\n      this.canvas.width / 2 - width / 2,\n      this.canvas.height / 2 - height / 2,\n      width,\n      height,\n      10\n    );\n    this.ctx.fill();\n    this.ctx.shadowColor = \"transparent\"; // Reset shadow\n\n    // Draw the pause text\n    this.ctx.fillStyle = \"#fff\";\n    this.ctx.font = \"bold 24px sans-serif\";\n    this.ctx.textAlign = \"center\";\n    this.ctx.textBaseline = \"middle\";\n    this.ctx.fillText(\n      \"Paused\",\n      this.canvas.width / 2,\n      this.canvas.height / 2 - 20\n    );\n    this.ctx.font = \"16px sans-serif\";\n    this.ctx.fillText(\n      \"Press 'p' to resume\",\n      this.canvas.width / 2,\n      this.canvas.height / 2 + 20\n    );\n  }\n\n  onResize(): void {\n    this.onEnter();\n  }\n\n  update(delta: number) {}\n\n  render(ctx: CanvasRenderingContext2D) {\n    ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n    // Render the previous state\n    const gameState = this.game.getPreviousState();\n    ctx.drawImage(gameState.canvas, 0, 0);\n\n    // Render the pause overlay\n    ctx.drawImage(this.canvas, 0, 0);\n  }\n}\n","import Layer from \"../entities/Layer\";\nimport Efb from \"../main\";\nimport State from \"../types/State\";\nimport GameState from \"./GameState\";\n\nexport default class LoaderState extends State {\n  bytesLoaded: number = 0;\n  bytesTotal: number = 10000;\n  infoLayer: Layer;\n  backgroundLayer: Layer;\n\n  constructor(public game: Efb) {\n    super(game);\n\n    this.infoLayer = new Layer(this.canvas);\n    this.backgroundLayer = new Layer(this.canvas, { backgroundColor: \"#023\" });\n  }\n\n  onKeyup(e: KeyboardEvent): void {\n    if (e.key === \"Enter\" && this.bytesLoaded >= this.bytesTotal) {\n      this.game.pushState(new GameState(this.game)); // Push the game state\n    }\n  }\n\n  update(delta: number): void {\n    const duration = 4; // Duration of the loading screen in seconds\n    this.bytesLoaded += (this.bytesTotal / duration) * delta; // Simulate loading progress\n    if (this.bytesLoaded >= this.bytesTotal) {\n      this.bytesLoaded = this.bytesTotal;\n    }\n\n    this.infoLayer.withLayer((canvas, ctx) => {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n      const percentage = Math.floor((100 * this.bytesLoaded) / this.bytesTotal);\n\n      ctx.fillStyle = \"#fff\";\n      ctx.font = \"12px sans-serif\";\n      ctx.textBaseline = \"middle\";\n      ctx.textAlign = \"left\";\n      ctx.fillText(\n        \"Loading...\",\n        this.canvas.width / 2 - 100,\n        this.canvas.height / 2 - 15\n      );\n      ctx.textAlign = \"right\";\n      ctx.fillText(\n        `${percentage}%`,\n        this.canvas.width / 2 + 100,\n        this.canvas.height / 2 - 15\n      );\n\n      ctx.strokeStyle = \"#fff\";\n      ctx.lineWidth = 1;\n      ctx.beginPath();\n      ctx.rect(\n        this.canvas.width / 2 - 100,\n        this.canvas.height / 2 - 5,\n        200,\n        10\n      );\n      ctx.stroke();\n\n      ctx.beginPath();\n      ctx.rect(\n        this.canvas.width / 2 - 100,\n        this.canvas.height / 2 - 5,\n        200 * (this.bytesLoaded / this.bytesTotal),\n        10\n      );\n      ctx.fill();\n\n      if (this.bytesLoaded >= this.bytesTotal) {\n        ctx.textAlign = \"center\";\n        ctx.fillStyle = \"#0f0\";\n        ctx.fillText(\n          \"Press Enter to start\",\n          this.canvas.width / 2,\n          this.canvas.height / 2 + 35\n        );\n      }\n    });\n  }\n\n  render(ctx: CanvasRenderingContext2D): void {\n    this.ctx.drawImage(\n      this.backgroundLayer.canvas,\n      0,\n      0,\n      this.canvas.width,\n      this.canvas.height\n    );\n    this.ctx.drawImage(\n      this.infoLayer.canvas,\n      0,\n      0,\n      this.canvas.width,\n      this.canvas.height\n    );\n    ctx.drawImage(this.canvas, 0, 0, this.canvas.width, this.canvas.height);\n  }\n}\n"],"names":[],"version":3,"file":"module.js.map"}